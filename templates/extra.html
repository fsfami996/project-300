{% extends 'base.html' %}
{% load static %}
{% load humanize %}

 {% block body %}

<div class="container">
<h3 class="mb-5 mt-4"  id="heading">Read More</h3>


  <div class="row">



   <div class="col-sm-9">

         <div class="card p-1">


          <div class="card p-0">

<div class="card promoting-card">




  <!-- Card image -->
  <div class="view overlay">

    <a href="#!">
      <div class="mask rgba-white-slight"></div>
    </a>
  </div>
</div>





                     {% if post.postImage %}
                    <img src="{{post.postImage.url }} " class="img-fluid img-thumbnail img-rounded"

                        alt="Responsive image">
 {% endif %}
                    <div class="card-body">
                        <div class="card-title"><br>
                        <h6 id="views"><i class="fa fa-eye" aria-hidden="true"></i> {{ post.views }} views</h6><br>

                            <h5 class="card-title post-title"> {{ post.postTitle }} </h5>
                            <h6 class="post-category">Category : {{post.category}}
                                published on</h6>
                            <p class="post-time"><i class="fa fa-calendar" aria-hidden="true"></i>
                                {{ post.postTimeDate | naturaltime}}
                            </p>



                        </div>                        </div>



                        <p>{{post.postBody |safe}}</p>


                          <!--button c,c++ and python-->
</div>

 <a class=" btn text-white btn-info" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
   <i class="fa fa-comment" aria-hidden="true"></i> comment</a>



<div class="cared mt-5 p-3">

<div class="collapse" id="collapseExample">

<!-- Comments Form -->
<br>
<h4 id="heading">Add a new comment</h4><br>
<form action="." method="post">
    {{ comment_form.as_p }}
    <br>
    {% csrf_token %}
    <button type="submit" class="btn btn-info">Add comment</button>
</form>
</div>








 <!--end button c,c++ and python-->
   <div style="margin-top:150px;">

       </div>







    <div class="card mb-4  mt-3 ">
      <div class="card-body">
        <!-- comments -->
        <h2 id="heading">{{ comments.count }} Comments</h2>


</div>
</div>
<!-- Comment with nested comments -->
{% for comment in comments|dictsort:"created" %}

<div class="card m-2">

    <div class="comment" >

     <div class="card m-1 p-2">

         <div class="d-flex flex-row comment-row m-t-0">
                    <div class="p-2"><img src="{% static 'uu.png' %}" alt="user" width="50" class="rounded-circle"></div>
                    <div class="comment-text w-100">
                        <h6 class="font-medium">{{comment.name}}</h6> <span class="m-b-15 d-block">{{comment.body|linebreaks }} </span>
                        <div class="comment-footer"> <span class="text-muted float-right"><i class="fa fa-calendar" aria-hidden="true"></i> {{ comment.created | naturaltime}}</span><br>  <button type="button" class="btn btn-info btn-sm"
                        data-toggle="collapse" data-target="#collapseExampler{{comment.id}}" aria-expanded="false" aria-controls="collapseExample">Reply</button> </div>

                    </div>

                </div>

     </div>


     <!--  add reply form -->



      <div class="collapse" id="collapseExampler{{comment.id}}">

  <div class="card ml-4 mt-3 mb-3 mr-1  p-2 pl-3 ml-4">
  <p id="heading">Add A Reply</p>
        <form action="." method="post">
            {{ comment_form.as_p }}
            {% csrf_token %}
            <!-- Hidden input for parent comment.id -->
            <input type="hidden" name="parent_id" value="{{ comment.id }}">
            <input class="btn btn-info" type="submit" value="Replay">

        </form>
        </div>
    </div>



    <!--end reply form-->



        {% for replay in comment.replies.all %}
        <!--show reply-->
        <div class="card p-3 ml-4 mr-1 mt-3 ">

           <span class="ml-3">Reply</span>

         <div class="d-flex flex-row comment-row m-t-0">
                    <div class="p-2"><img src="{% static 'uu.png' %}" alt="user" width="50" class="rounded-circle"></div>
                    <div class="comment-text w-100">
                        <h6 class="font-medium">{{replay.name}}</h6> <span class="m-b-15 d-block">{{replay.body|linebreaks }} </span>
                        <div class="comment-footer"> <span class="text-muted float-right"><i class="fa fa-calendar" aria-hidden="true"></i> {{ replay.created | naturaltime}}</span><br>

                    </div>

                </div>

     </div>




            </div>
            <br>
        {% endfor %}


    </div>
    </div>
{% empty %}
<h4 id="heading">There are no comments yet.</h4>
{% endfor %}
</div>
</div>
<div class="mb-5"></div>
  </div>


 <!-- col-2 start-->


        <div class="col-sm-3 " >

             <!--category-->
<div class="card p-1">
             <div class="card promoting-card">

<h6 class="bg-info m-2 p-3 text-center" id="headings">Categories</h6>





  <!-- Card content -->
  <div class="card-body">

                        <div class="mt-3 text-center">
                             {% for cat in Categories%}

                      <a class="text-style" href="{% url 'categories' cat.category %}"> {{cat.category}},  </a>




                             {% endfor %}
                        </div>



                    </div>


</div>


</div>




                  <!--  recent post strat here -->


   <!-- Card -->
   <div class="card p-1 mt-5">
<div class="card promoting-card">

<h6 class="bg-info m-2  p-3 text-center" id="headings">Most Popular Blogs</h6>

 <div class="card-body">

                        <div class="mt-3">
                             {% for post in Populer%}



                            <a href="{% url 'readMore' post.postId %}">
                                <p    class="text-style">
                                    {{ post.postDescriptions | truncatewords:10 }}

                                </p>
                            </a>


                            <span class="description"><i class="fa fa-calendar" aria-hidden="true"></i> {{ post.postTimeDate | naturaltime }}</span>
                            <p class="description"><i class="fa fa-eye" aria-hidden="true"></i> {{ post.views }} views</p>


<hr>



                            <br>
                             {% endfor %}
                        </div>



                    </div>


</div>


</div>
<!-- Card  recent   -->


<div class="card p-1 mt-5">
<div class="card promoting-card">

<h6 class="bg-info m-2  p-3 text-center" id="headings">Recent Blogs</h6>

 <div class="card-body">

                        <div class="mt-3">
                             {% for post in RecentPost%}

                            <img style="float:left;" class="d-inline-block" src="{{ post.get_photo_url }}" height=80;
                                width=80; alt="abc">


                            <a href="{% url 'readMore' post.postId %}">
                                <p  style="margin-left:90px;" class="text-style">
                                    {{ post.postTitle |truncatewords:2 }}
                                </p>
                            </a>


                            <p style="margin-left:100px; margin-top:-10px;" class="description"><i class="fa fa-calendar" aria-hidden="true"></i> {{ post.postTimeDate | naturaltime }}</p>


                            <hr>
                             {% endfor %}
                        </div>



                    </div>





</div>

</div>

</div>
</div>



</div>


{% endblock body %}